# BKD-003.d ‚Äî Implementar PUT/DELETE /transactions/:id

- **ID:** BKD-003.d
- **T√≠tulo:** Implementar `PUT /transactions/:id` e `DELETE /transactions/:id`

## Checklist

- [x] Permitir edi√ß√£o apenas do owner (verificar session userId)
- [x] Atualizar campos permitidos e recalcular saldo se necess√°rio
- [x] Implementar dele√ß√£o segura (soft delete opcional)
- [x] Testes de autoriza√ß√£o e comportamento de atualiza√ß√£o/dele√ß√£o

## Detalhes

- **Prioridade:** üî¥ Cr√≠tica
- **Estimativa:** 1.5h
- **Depend√™ncias:** BKD-003.a, BKD-001
- **Arquivos alvo:** `src/server/transactions.server.ts`

### Notas de conclus√£o

- `updateTransaction`/`deleteTransaction` em `src/server/transactions.server.ts` checam ownership (`requireUser` + `userId` da transa√ß√£o) e validam relacionamentos opcionais.
- `balanceDelta` calculado comparando antes/depois (update) e invertendo impacto na dele√ß√£o (hard delete por aus√™ncia de `deletedAt`).
- Testes de autoriza√ß√£o/delta em `tests/unit/transactions.server.test.ts` e fluxo completo em `tests/integration/transactions.e2e.test.ts`.
